var status = -1;
var 必成卷轴 = Array(2040003, 2040007, 2040011, 2040015, 2040019, 2040103, 2040107, 2040111, 2040115, 2040119, 2040203, 2040207, 2040211, 2040215, 2040219, 2040303, 2040307, 2040311, 2040315, 2040319, 2040403, 2040407, 2040411, 2040415, 2040419, 2040503, 2040507, 2040511, 2040515, 2040519, 2040603, 2040607, 2040611, 2040615, 2040619, 2040703, 2040707, 2040711, 2040715, 2040719, 2040731, 2040823, 2040923, 2041003, 2041007, 2041011, 2041015, 2041019, 2041103, 2041107, 2041111, 2041115, 2041119, 2041203, 2041207, 2041211, 2041215, 2041219, 2041303, 2041307, 2041311, 2041315, 2041319, 2048003, 2048007, 2048011, 2048015, 2048019, 2048031, 2043023, 2043123, 2043223, 2043323, 2043727, 2043827, 2044023, 2044123, 2044223, 2044323, 2044423, 2044523, 2044623, 2044723, 2044823, 2044923);
var _60卷轴 = Array(2040001, 2040005, 2040009, 2040013, 2040017, 2040101, 2040105, 2040109, 2040113, 2040117, 2040201, 2040205, 2040209, 2040213, 2040217, 2040301, 2040305, 2040309, 2040313, 2040317, 2040401, 2040405, 2040409, 2040413, 2040417, 2040501, 2040505, 2040509, 2040513, 2040517, 2040601, 2040605, 2040609, 2040613, 2040617, 2040701, 2040705, 2040709, 2040713, 2040717, 2040729, 2040821, 2040921, 2041001, 2041005, 2041009, 2041013, 2041017, 2041101, 2041105, 2041109, 2041113, 2041117, 2041201, 2041205, 2041209, 2041213, 2041217, 2041301, 2041305, 2041309, 2041313, 2041317, 2048001, 2048005, 2048009, 2048013, 2048017, 2048029, 2043021, 2043121, 2043221, 2043321, 2043725, 2043825, 2044021, 2044121, 2044221, 2044321, 2044421, 2044521, 2044621, 2044721, 2044821, 2044921, 2049001, 2049101);
var _10卷轴 = Array(2040002, 2040006, 2040010, 2040014, 2040018, 2040102, 2040106, 2040110, 2040114, 2040118, 2040202, 2040206, 2040210, 2040214, 2040218, 2040302, 2040306, 2040310, 2040314, 2040318, 2040402, 2040406, 2040410, 2040414, 2040418, 2040502, 2040506, 2040510, 2040514, 2040518, 2040602, 2040606, 2040610, 2040614, 2040618, 2040702, 2040706, 2040710, 2040714, 2040718, 2040730, 2040822, 2040922, 2041002, 2041006, 2041010, 2041014, 2041018, 2041102, 2041106, 2041110, 2041114, 2041118, 2041202, 2041206, 2041210, 2041214, 2041218, 2041302, 2041306, 2041310, 2041314, 2041318, 2048002, 2048006, 2048010, 2048014, 2048018, 2048030, 2043022, 2043122, 2043222, 2043322, 2043726, 2043826, 2044022, 2044122, 2044222, 2044322, 2044422, 2044522, 2044622, 2044722, 2044822, 2044922, 2049002);

var mapleLeavsEquip = Array(
	1012098, 1012101, 1012102, 1012103, 1032040, 1032041, 1032042, 1122015, 1002419, 1002508, 1002509, 1002510, 1002511, 1002515, 1002516, 1002517, 1002518, 1002553, 1002600, 1002601, 1002602, 1002603, 1002758, 1102166, 1102167, 1102168, 1082252, 1082255, 1052214, 1112115, 1112808, 1092030, 1092045, 1092046, 1092047, 1072408, 1902036, 1912029, 1302020, 1302030, 1302033, 1302035, 1302036, 1302064, 1302065, 1302066, 1302067, 1302124, 1302125, 1302126, 1312032, 1312033, 1312046, 1322054, 1322055, 1322074, 1332025, 1332055, 1332056, 1332057, 1332093, 1332094, 1332095, 1372034, 1372056, 1382009, 1382012, 1382039, 1382040, 1382074, 1382075, 1382076, 1402039, 1402040, 1402068, 1412011, 1412027, 1412028, 1412043, 1412044, 1422014, 1422029, 1422032, 1422046, 1422047, 1432012, 1432040, 1432041, 1432058, 1432059, 1442024, 1442051, 1442052, 1442083, 1442084, 1452022, 1452045, 1452046, 1452078, 1452079, 1462014, 1462019, 1462040, 1462041, 1462069, 1462070, 1462071, 1472030, 1472032, 1472055, 1472056, 1472093, 1472094, 1472095, 1482020, 1482021, 1482022, 1482041, 1482043, 1492020, 1492021, 1492022, 1492042, 2022016, 2022117, 2022251, 2070011, 3010025
);
var chairs = Array(
	3010000, 3010001, 3010002, 3010003, 3010004, 3010005, 3010006, 3010007, 3010008, 3010009, 3010010, 3010011, 3010012, 3010013, 3010014, 3010015, 3010016, 3010017, 3010018, 3010019, 3010022, 3010023, 3010024, 3010025, 3010026, 3010028, 3011000, 3010040, 3010041, 3010045, 3012005, 3010046, 3010047, 3010072, 3010057, 3010058, 3010060, 3010061, 3010062, 3010063, 3010064, 3010065, 3010066, 3010067, 3010043, 3010071, 3010085, 3010098, 3010099, 3010073, 3010101, 3010106, 3010111, 3010080, 3010081, 3010082, 3010083, 3010084, 3010092, 3010116, 3010069, 3012010, 3012011
);
var fee = 4001126;

function start() {
	action(1, 0, 0);
}

function action(mode, type, selection) {

	status++;
	if(mode != 1) {
		if(mode == 0 && type != 4)
			status -= 2;
		else {
			cm.dispose();
			return;
		}
	}
	if(status == 0) {
		cm.sendSimple("#L0使用##r#z" + fee + "##k来抽奖#l\r\n" +
			"#L1使用1000点券购买##r购买3个枫叶#k#l");
	} else if(status == 1) {
		if(selection == 0) {
			if(cm.haveItem(fee)) {
				for(var i = 1; i < 6; i++) {
					if(cm.getInventory(i).isFull()) {
						cm.sendOk("先确认每个背包都有空间");
						cm.dispose();
						return;
					}
				}
				cm.gainItem(fee, -1);
				var array;
				if(Math.random() < 0.01) {
					array = chairs;
				} else if(Math.random() < 0.6) {
					array = _10卷轴;
				} else if(Math.random() < 0.98) {
					array = _60卷轴;
				} else {
					array = 必成卷轴;
				}
				var index = parseInt(Math.random() * array.length);
				cm.gainItem(array[index], 1);
			} else {
				cm.sendOk("你身上没有#z" + fee + "#来抽奖");
			}
			cm.dispose();
		} else if(selection == 1) {
			if(cm.getPlayer().getCashShop().getCash(1) >= 1000) {
				cm.getPlayer().getCashShop().gainCash(1, -1000);
				cm.gainItem(fee, 3);
			} else {
				cm.sendOk("点券不够呢");
			}
			cm.dispose();
		}
	}
}